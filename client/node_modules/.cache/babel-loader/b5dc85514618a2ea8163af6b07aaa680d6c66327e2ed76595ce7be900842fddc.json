{"ast":null,"code":"import _slicedToArray from\"/Users/bekzat.ongdassynovicloud.com/SpotifyApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SERVER_URL='http://localhost:3001';// Replace with your server's URL\nvar App=function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),accessToken=_useState2[0],setAccessToken=_useState2[1];var handleLogin=function handleLogin(){// Redirect the user to the server's login endpoint\nwindow.location.href=\"\".concat(SERVER_URL,\"/login\");};useEffect(function(){// Handle the callback after successful login\nvar handleCallback=function handleCallback(){var params=new URLSearchParams(window.location.search);var code=params.get('code');// If there is a code parameter in the URL, send it to the server to get the access token\nif(code){axios.get(\"\".concat(SERVER_URL,\"/callback?code=\").concat(code)).then(function(res){console.log('User Data:',res.data);localStorage.setItem('accessToken',res.data.access_token);setAccessToken(res.data.access_token);// Optionally, you can save the access token in state or local storage for future use\n}).catch(function(error){return console.error('Error:',error);});}};// Call handleCallback when the component mounts to handle the callback\nhandleCallback();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Spotify Authentication\"}),accessToken?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Access Token: \",accessToken]})}):/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Login with Spotify\"})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","SERVER_URL","App","_useState","_useState2","_slicedToArray","accessToken","setAccessToken","handleLogin","window","location","href","concat","handleCallback","params","URLSearchParams","search","code","get","then","res","console","log","data","localStorage","setItem","access_token","catch","error","children","onClick"],"sources":["/Users/bekzat.ongdassynovicloud.com/SpotifyApp/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst SERVER_URL = 'http://localhost:3001'; // Replace with your server's URL\n\nconst App = () => {\n\n  const [accessToken, setAccessToken] = useState(null)\n  const handleLogin = () => {\n    // Redirect the user to the server's login endpoint\n    window.location.href = `${SERVER_URL}/login`;\n  };\n\n  useEffect(() => {\n    // Handle the callback after successful login\n    const handleCallback = () => {\n      const params = new URLSearchParams(window.location.search);\n      const code = params.get('code');\n\n      // If there is a code parameter in the URL, send it to the server to get the access token\n      if (code) {\n        axios.get(`${SERVER_URL}/callback?code=${code}`)\n          .then(res => {\n            console.log('User Data:', res.data);\n            localStorage.setItem('accessToken', res.data.access_token)\n            setAccessToken(res.data.access_token)\n            // Optionally, you can save the access token in state or local storage for future use\n          })\n          .catch(error => console.error('Error:', error));\n      }\n    };\n\n    // Call handleCallback when the component mounts to handle the callback\n    handleCallback();\n  }, []);\n\n  return (\n    <div>\n      <h1>Spotify Authentication</h1>\n      {accessToken ? (\n        <div>\n          <p>Access Token: {accessToken}</p>\n          {/* Use the access token for other API requests or other actions */}\n        </div>\n      ) : (\n        <button onClick={handleLogin}>Login with Spotify</button>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"2IAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,GAAM,CAAAC,UAAU,CAAG,uBAAuB,CAAE;AAE5C,GAAM,CAAAC,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAA,CAAS,CAEhB,IAAAC,SAAA,CAAsCR,QAAQ,CAAC,IAAI,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,GAAM,CAAAI,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxB;AACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,IAAAC,MAAA,CAAMX,UAAU,UAAQ,CAC9C,CAAC,CAEDP,SAAS,CAAC,UAAM,CACd;AACA,GAAM,CAAAmB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,GAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACN,MAAM,CAACC,QAAQ,CAACM,MAAM,CAAC,CAC1D,GAAM,CAAAC,IAAI,CAAGH,MAAM,CAACI,GAAG,CAAC,MAAM,CAAC,CAE/B;AACA,GAAID,IAAI,CAAE,CACRrB,KAAK,CAACsB,GAAG,IAAAN,MAAA,CAAIX,UAAU,oBAAAW,MAAA,CAAkBK,IAAI,CAAE,CAAC,CAC7CE,IAAI,CAAC,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAEF,GAAG,CAACG,IAAI,CAAC,CACnCC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEL,GAAG,CAACG,IAAI,CAACG,YAAY,CAAC,CAC1DnB,cAAc,CAACa,GAAG,CAACG,IAAI,CAACG,YAAY,CAAC,CACrC;AACF,CAAC,CAAC,CACDC,KAAK,CAAC,SAAAC,KAAK,QAAI,CAAAP,OAAO,CAACO,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,GAAC,CACnD,CACF,CAAC,CAED;AACAf,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEb,KAAA,QAAA6B,QAAA,eACE/B,IAAA,OAAA+B,QAAA,CAAI,wBAAsB,CAAI,CAAC,CAC9BvB,WAAW,cACVR,IAAA,QAAA+B,QAAA,cACE7B,KAAA,MAAA6B,QAAA,EAAG,gBAAc,CAACvB,WAAW,EAAI,CAAC,CAE/B,CAAC,cAENR,IAAA,WAAQgC,OAAO,CAAEtB,WAAY,CAAAqB,QAAA,CAAC,oBAAkB,CAAQ,CACzD,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3B,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}